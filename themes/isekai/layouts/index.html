<!DOCTYPE html>
<html lang="en">
  {{ partial "head.html" . }}
  <body>
    {{ partial "navbar.html" . }}
    {{ partial "header.html" . }}
    {{ partial "grid.html" . }}
    {{ partial "pagination.html" . }}
    {{ partial "info.html" . }}
    {{ partial "js-init.html" . }}
    <script type="text/javascript">
        if('serviceWorker' in navigator) {
            navigator.serviceWorker
                .register('/sw.js')
                .then(function() {});
        }
        'use strict';
    
        if ('serviceWorker' in navigator) {
          window.addEventListener('load', function() {
            navigator.serviceWorker.register('/sw.js').then(function(reg) {
              // updatefound is fired if sw.js changes.
              reg.onupdatefound = function() {
                var installingWorker = reg.installing;
    
                installingWorker.onstatechange = function() {
                  switch (installingWorker.state) {
                    case 'installed':
                      if (navigator.serviceWorker.controller) {
                        console.log('New or updated content is available. Please refresh.');
                      } else {
                        console.log('Content is now available offline!');
                      }
                      break;
    
                    case 'redundant':
                      console.error('The installing service worker became redundant.');
                      break;
                  }
                };
              };
            }).catch(function(e) {
              console.error('Error during service worker registration:', e);
            });
          });
        }
    </script>    
  </body>
</html>